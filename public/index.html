<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Neuropsicologia</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <!-- In-System Notifications -->
    <div id="notification-container" class="notification-container">
        <!-- Notifications will be added here -->
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="login-container">
        <div class="login-form">
            <!-- New: Login Badge -->
            <div class="login-badge">
                <img src="/a/bfd67732-2f24-42f1-874b-00a99805d87d" alt="System ID">
            </div>
            <h1>Sistema de Neuropsicologia</h1>
            <p class="login-subtitle">Acesso Restrito</p>
            <form id="form-login">
                <div class="form-group">
                    <label for="username">Nome</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn-primary">Entrar</button>
            </form>
                </ul>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" style="display: none;">
        <header>
            <div class="header-top">
                <h1>Sistema de Neuropsicologia</h1>
                <div class="user-info">
                    <span id="current-user-name"></span>
                    <span id="current-user-role"></span>
                    <button id="btn-logout" class="btn-logout">
                        <i class="fa-solid fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>
            <nav>
                <button class="tab-button active" data-tab="cadastro">
                    <i class="fa-solid fa-user-plus"></i> 
                    <span>Cadastrar Cliente</span>
                </button>
                <button class="tab-button" data-tab="agenda">
                    <i class="fa-solid fa-calendar-days"></i> 
                    <span>Agenda do Dia</span>
                </button>
                <button class="tab-button coordinator-or-staff-only" data-tab="historico">
                    <i class="fa-solid fa-clock-rotate-left"></i> 
                    <span>Todos os pacientes</span>
                </button>
                <button class="tab-button coordinator-or-staff-only" data-tab="relatorio-clientes">
                    <i class="fa-solid fa-chart-pie"></i> 
                    <span>Relat√≥rio de Clientes</span>
                </button>
                <button class="tab-button coordinator-or-staff-only" data-tab="documentos">
                    <i class="fa-solid fa-folder-open"></i> 
                    <span>Laudos</span>
                </button>
                <button class="tab-button intern-only" data-tab="meus-pacientes">
                    <i class="fa-solid fa-user-heart"></i> 
                    <span>Meus Pacientes</span>
                </button>
                <button class="tab-button coordinator-only" data-tab="financeiro">
                    <i class="fa-solid fa-dollar-sign"></i> 
                    <span>Financeiro</span>
                </button>
                <button class="tab-button coordinator-only" data-tab="estoque">
                    <i class="fa-solid fa-boxes-stacked"></i> 
                    <span>Estoque</span>
                </button>
                <button class="tab-button coordinator-only" data-tab="estagiarios">
                    <i class="fa-solid fa-users"></i> 
                    <span>Estagi√°rios</span>
                </button>
            </nav>
        </header>

        <main>
            <div id="tab-cadastro" class="tab-content active">
                <h2>Cadastrar Novo Cliente</h2>
                
                <!-- Age Selection -->
                <div class="age-selection">
                    <label>
                        <input type="radio" name="age-type" value="adult" checked>
                        Maior de Idade (18+)
                    </label>
                    <label>
                        <input type="radio" name="age-type" value="minor">
                        Menor de Idade
                    </label>
                </div>

                <!-- Adult Form -->
                <form id="form-novo-cliente-adulto">
                    <fieldset>
                        <legend>Dados Pessoais</legend>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nome-cliente-adulto">Nome Completo</label>
                                <input type="text" id="nome-cliente-adulto" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="data-nascimento-adulto">Data de Nascimento</label>
                                <input type="date" id="data-nascimento-adulto" required>
                            </div>
                            <div class="form-group">
                                <label for="genero-adulto">G√™nero</label>
                                <select id="genero-adulto" required>
                                    <option value="">Selecione</option>
                                    <option value="masculino">Masculino</option>
                                    <option value="feminino">Feminino</option>
                                    <option value="outro">Outro</op
                                        tion>
                                    <option value="nao-informar">Prefiro n√£o informar</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cpf-cliente-adulto">CPF</label>
                                <input type="text" id="cpf-cliente-adulto" placeholder="000.000.000-00" required>
                            </div>
                            <div class="form-group">
                                <label for="rg-adulto">RG</label>
                                <input type="text" id="rg-adulto" placeholder="00.000.000-0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="naturalidade-adulto">Naturalidade</label>
                                <input type="text" id="naturalidade-adulto" placeholder="Cidade/Estado">
                            </div>
                            <div class="form-group">
                                <label for="estado-civil-adulto">Estado Civil</label>
                                <select id="estado-civil-adulto">
                                    <option value="">Selecione</option>
                                    <option value="solteiro">Solteiro(a)</option>
                                    <option value="casado">Casado(a)</option>
                                    <option value="divorciado">Divorciado(a)</option>
                                    <option value="viuvo">Vi√∫vo(a)</option>
                                    <option value="uniao-estavel">Uni√£o Est√°vel</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="escolaridade-adulto">Escolaridade</label>
                                <select id="escolaridade-adulto">
                                    <option value="">Selecione</option>
                                    <option value="fundamental-incompleto">Ensino Fundamental Incompleto</option>
                                    <option value="fundamental-completo">Ensino Fundamental Completo</option>
                                    <option value="medio-incompleto">Ensino M√©dio Incompleto</option>
                                    <option value="medio-completo">Ensino M√©dio Completo</option>
                                    <option value="superior-incompleto">Ensino Superior Incompleto</option>
                                    <option value="superior-completo">Ensino Superior Completo</option>
                                    <option value="pos-graduacao">P√≥s-gradua√ß√£o</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="profissao-adulto">Profiss√£o</label>
                                <input type="text" id="profissao-adulto">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="email-cliente-adulto">Email</label>
                                <input type="email" id="email-cliente-adulto">
                            </div>
                            <div class="form-group">
                                <label for="telefone-cliente-adulto">Telefone</label>
                                <input type="tel" id="telefone-cliente-adulto" placeholder="(00) 90000-0000">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contato-emergencia-adulto">Contato de Emerg√™ncia</label>
                                <input type="text" id="contato-emergencia-adulto" placeholder="Nome e telefone">
                            </div>
                        </div>
                    </fieldset>
                    
                    <fieldset>
                        <legend>Endere√ßo</legend>
                        <div class="form-row">
                            <div class="form-group cep-group">
                                <label for="cep-cliente-adulto">CEP</label>
                                <input type="text" id="cep-cliente-adulto" placeholder="00000-000">
                                <small>Digite o CEP para preenchimento autom√°tico.</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group form-group-large">
                                <label for="logradouro-cliente-adulto">Logradouro (Rua, Av.)</label>
                                <input type="text" id="logradouro-cliente-adulto">
                            </div>
                            <div class="form-group form-group-small">
                                <label for="numero-cliente-adulto">N√∫mero</label>
                                <input type="text" id="numero-cliente-adulto">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="complemento-cliente-adulto">Complemento</label>
                                <input type="text" id="complemento-cliente-adulto">
                            </div>
                            <div class="form-group">
                                <label for="bairro-cliente-adulto">Bairro</label>
                                <input type="text" id="bairro-cliente-adulto">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group form-group-large">
                                <label for="cidade-cliente-adulto">Cidade</label>
                                <input type="text" id="cidade-cliente-adulto">
                            </div>
                            <div class="form-group form-group-small">
                                <label for="estado-cliente-adulto">Estado</label>
                                <input type="text" id="estado-cliente-adulto">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Outras Informa√ß√µes</legend>
                        <div class="form-group">
                            <label for="observacoes-cliente-adulto">Observa√ß√µes Gerais</label>
                            <textarea id="observacoes-cliente-adulto" rows="4"></textarea>
                        </div>
                    </fieldset>

                    <button type="submit" class="btn-primary">Salvar Cliente</button>
                </form>

                <!-- Minor Form -->
                <form id="form-novo-cliente-menor" style="display: none;">
                    <fieldset>
                        <legend>Dados Pessoais do Menor</legend>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nome-cliente-menor">Nome Completo</label>
                                <input type="text" id="nome-cliente-menor" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="data-nascimento-menor">Data de Nascimento</label>
                                <input type="date" id="data-nascimento-menor" required>
                            </div>
                            <div class="form-group">
                                <label for="genero-menor">G√™nero</label>
                                <select id="genero-menor" required>
                                    <option value="">Selecione</option>
                                    <option value="masculino">Masculino</option>
                                    <option value="feminino">Feminino</option>
                                    <option value="outro">Outro</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="escola-menor">Nome da Escola</label>
                                <input type="text" id="escola-menor">
                            </div>
                            <div class="form-group">
                                <label for="tipo-escola-menor">Tipo de Escola</label>
                                <select id="tipo-escola-menor">
                                    <option value="">Selecione</option>
                                    <option value="publica">P√∫blica</option>
                                    <option value="particular">Particular</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ano-escolar-menor">Ano Escolar</label>
                                <select id="ano-escolar-menor">
                                    <option value="">Selecione</option>
                                    <option value="maternal">Maternal</option>
                                    <option value="pre1">Pr√© I</option>
                                    <option value="pre2">Pr√© II</option>
                                    <option value="1ano">1¬∫ Ano</option>
                                    <option value="2ano">2¬∫ Ano</option>
                                    <option value="3ano">3¬∫ Ano</option>
                                    <option value="4ano">4¬∫ Ano</option>
                                    <option value="5ano">5¬∫ Ano</option>
                                    <option value="6ano">6¬∫ Ano</option>
                                    <option value="7ano">7¬∫ Ano</option>
                                    <option value="8ano">8¬∫ Ano</option>
                                    <option value="9ano">9¬∫ Ano</option>
                                    <option value="1medio">1¬∫ Ano M√©dio</option>
                                    <option value="2medio">2¬∫ Ano M√©dio</option>
                                    <option value="3medio">3¬∫ Ano M√©dio</option>
                                </select>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Dados dos Pais/Respons√°veis</legend>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nome-pai">Nome do Pai</label>
                                <input type="text" id="nome-pai">
                            </div>
                            <div class="form-group">
                                <label for="idade-pai">Idade do Pai</label>
                                <input type="number" id="idade-pai" min="18" max="100">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="profissao-pai">Profiss√£o do Pai</label>
                                <input type="text" id="profissao-pai">
                            </div>
                            <div class="form-group">
                                <label for="telefone-pai">Telefone do Pai</label>
                                <input type="tel" id="telefone-pai" placeholder="(00) 90000-0000">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nome-mae">Nome da M√£e</label>
                                <input type="text" id="nome-mae">
                            </div>
                            <div class="form-group">
                                <label for="idade-mae">Idade da M√£e</label>
                                <input type="number" id="idade-mae" min="18" max="100">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="profissao-mae">Profiss√£o da M√£e</label>
                                <input type="text" id="profissao-mae">
                            </div>
                            <div class="form-group">
                                <label for="telefone-mae">Telefone da M√£e</label>
                                <input type="tel" id="telefone-mae" placeholder="(00) 90000-0000">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="responsavel-financeiro">Respons√°vel Financeiro</label>
                                <select id="responsavel-financeiro">
                                    <option value="">Selecione</option>
                                    <option value="pai">Pai</option>
                                    <option value="mae">M√£e</option>
                                    <option value="ambos">Ambos</option>
                                    <option value="outro">Outro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="outro-responsavel">Outro Respons√°vel (se aplic√°vel)</label>
                                <input type="text" id="outro-responsavel" placeholder="Nome e parentesco">
                            </div>
                        </div>
                    </fieldset>
                    
                    <fieldset>
                        <legend>Endere√ßo</legend>
                        <div class="form-row">
                            <div class="form-group cep-group">
                                <label for="cep-cliente-menor">CEP</label>
                                <input type="text" id="cep-cliente-menor" placeholder="00000-000">
                                <small>Digite o CEP para preenchimento autom√°tico.</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group form-group-large">
                                <label for="logradouro-cliente-menor">Logradouro (Rua, Av.)</label>
                                <input type="text" id="logradouro-cliente-menor">
                            </div>
                            <div class="form-group form-group-small">
                                <label for="numero-cliente-menor">N√∫mero</label>
                                <input type="text" id="numero-cliente-menor">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="complemento-cliente-menor">Complemento</label>
                                <input type="text" id="complemento-cliente-menor">
                            </div>
                            <div class="form-group">
                                <label for="bairro-cliente-menor">Bairro</label>
                                <input type="text" id="bairro-cliente-menor">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group form-group-large">
                                <label for="cidade-cliente-menor">Cidade</label>
                                <input type="text" id="cidade-cliente-menor">
                            </div>
                            <div class="form-group form-group-small">
                                <label for="estado-cliente-menor">Estado</label>
                                <input type="text" id="estado-cliente-menor">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Outras Informa√ß√µes</legend>
                        <div class="form-group">
                            <label for="observacoes-cliente-menor">Observa√ß√µes Gerais</label>
                            <textarea id="observacoes-cliente-menor" rows="4"></textarea>
                        </div>
                    </fieldset>

                    <button type="submit" class="btn-primary">Salvar Cliente</button>
                </form>
            </div>

            <div id="tab-agenda" class="tab-content">
                <h2>Agenda do Dia - <span id="current-date"></span></h2>
                <div class="agenda-controls">
                    <div class="calendar-container">
                        <input type="month" id="month-selector">
                        <div id="calendar-grid" class="calendar-grid"></div>
                    </div>
                    <div class="agenda-actions">
                        <input type="date" id="date-selector">
                        <button id="btn-novo-agendamento" class="btn-primary">
                            <i class="fa-solid fa-plus"></i> Novo Agendamento
                        </button>
                    </div>
                </div>
                <div id="agenda-list">
                    <!-- Agendamentos ser√£o renderizados aqui -->
                </div>
            </div>

            <div id="tab-historico" class="tab-content">
                <h2>Todos os pacientes</h2>
                <div class="search-container">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" id="search-cliente" placeholder="Buscar cliente por nome, CPF ou ID...">
                </div>
                <div id="client-list-container">
                    <!-- A lista de clientes ser√° renderizada aqui pelo JS -->
                    <p>Nenhum cliente cadastrado ainda.</p>
                </div>
            </div>

            <div id="tab-relatorio-clientes" class="tab-content">
                <div class="client-report-header">
                    <h2>Relat√≥rio Geral de Pacientes</h2>
                    <div class="client-report-controls">
                        <label for="client-report-period">Per√≠odo de an√°lise:</label>
                        <select id="client-report-period" class="report-period-selector">
                            <option value="all">Todos os per√≠odos</option>
                            <option value="current-month">M√™s atual</option>
                            <option value="last-3-months">√öltimos 3 meses</option>
                            <option value="last-6-months">√öltimos 6 meses</option>
                            <option value="current-year">Ano atual</option>
                        </select>
                        <button id="btn-update-client-report" class="btn-primary">
                            <i class="fa-solid fa-refresh"></i> Atualizar
                        </button>
                    </div>
                </div>
                
                <div class="client-report-dashboard">
                    <div class="client-summary-grid">
                        <div class="summary-card total-clients-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-users"></i>
                            </div>
                            <div class="card-content">
                                <h3>Total de Clientes</h3>
                                <span class="count" id="total-clients-count">0</span>
                                <div class="card-meta">
                                    <span>Cadastrados no sistema</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card adult-clients-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-user-tie"></i>
                            </div>
                            <div class="card-content">
                                <h3>Clientes Adultos</h3>
                                <span class="count" id="adult-clients-count">0</span>
                                <div class="card-meta">
                                    <span>Maiores de 18 anos</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card minor-clients-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-child"></i>
                            </div>
                            <div class="card-content">
                                <h3>Clientes Menores</h3>
                                <span class="count" id="minor-clients-count">0</span>
                                <div class="card-meta">
                                    <span>Menores de 18 anos</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card active-clients-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-user-check"></i>
                            </div>
                            <div class="card-content">
                                <h3>Clientes Ativos</h3>
                                <span class="count" id="clients-with-appointments">0</span>
                                <div class="card-meta">
                                    <span>Com atendimentos registrados</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card inactive-clients-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-user-clock"></i>
                            </div>
                            <div class="card-content">
                                <h3>Clientes Inativos</h3>
                                <span class="count" id="clients-without-recent-appointments">0</span>
                                <div class="card-meta">
                                    <span>Sem atendimentos recentes</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card scheduled-clients-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-calendar-check"></i>
                            </div>
                            <div class="card-content">
                                <h3>Com Agendamentos</h3>
                                <span class="count" id="clients-with-schedules">0</span>
                                <div class="card-meta">
                                    <span>Agendamentos futuros</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="client-details-section">
                        <h3>Detalhamento por Cliente - <span id="client-report-period-display">Todos os per√≠odos</span></h3>
                        <div class="client-report-details">
                            <div id="client-report-list">
                                <!-- Detalhes dos clientes ser√£o renderizados aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-meus-pacientes" class="tab-content">
                <h2>Meus Pacientes</h2>
                <div class="search-container">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" id="search-meus-pacientes" placeholder="Buscar meus pacientes por nome, CPF ou ID...">
                </div>
                <div id="meus-pacientes-list">
                    <!-- Lista de pacientes do estagi√°rio ser√° renderizada aqui -->
                </div>
            </div>

            <div id="tab-financeiro" class="tab-content">
                <div class="financial-header">
                    <h2>Painel Financeiro</h2>
                    <div class="financial-controls">
                        <label for="financial-month-selector">Per√≠odo:</label>
                        <input type="month" id="financial-month-selector" class="month-selector">
                        <button id="btn-update-financial" class="btn-primary">
                            <i class="fa-solid fa-refresh"></i> Atualizar
                        </button>
                    </div>
                </div>
                
                <div class="financial-dashboard">
                    <div class="financial-summary-grid">
                        <div class="summary-card revenue-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-arrow-trend-up"></i>
                            </div>
                            <div class="card-content">
                                <h3>Receita Total</h3>
                                <span class="amount" id="monthly-revenue">R$ 0,00</span>
                                <div class="card-meta">
                                    <span>Atendimentos: <span id="monthly-appointments">0</span></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card stock-entries-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-shopping-cart"></i>
                            </div>
                            <div class="card-content">
                                <h3>Despesas com Compras</h3>
                                <span class="amount" id="stock-entries-value">R$ 0,00</span>
                                <div class="card-meta">
                                    <span>Materiais adquiridos</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card stock-exits-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-tools"></i>
                            </div>
                            <div class="card-content">
                                <h3>Custo de Materiais Usados</h3>
                                <span class="amount" id="stock-exits-value">R$ 0,00</span>
                                <div class="card-meta">
                                    <span>Materiais utilizados em atendimentos</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card balance-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-scale-balanced"></i>
                            </div>
                            <div class="card-content">
                                <h3>Resultado L√≠quido</h3>
                                <span class="amount" id="net-result">R$ 0,00</span>
                                <div class="card-meta">
                                    <span>Receitas - Despesas Totais</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card clients-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-users"></i>
                            </div>
                            <div class="card-content">
                                <h3>Clientes Ativos</h3>
                                <span class="count" id="active-clients">0</span>
                                <div class="card-meta">
                                    <span>Total cadastrados</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="summary-card appointments-card">
                            <div class="card-icon">
                                <i class="fa-solid fa-calendar-check"></i>
                            </div>
                            <div class="card-content">
                                <h3>Agendamentos</h3>
                                <span class="count" id="total-schedules">0</span>
                                <div class="card-meta">
                                    <span>No per√≠odo</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="financial-notes-section">
                        <h3>Notas Di√°rias</h3>
                        <div class="daily-notes-controls">
                            <button id="btn-add-daily-note" class="btn-primary">
                                <i class="fa-solid fa-plus"></i> Adicionar Nota do Dia
                            </button>
                            <button id="btn-generate-monthly-report" class="btn-secondary">
                                <i class="fa-solid fa-file-alt"></i> Gerar Relat√≥rio Mensal
                            </button>
                        </div>
                        <div id="daily-notes-list">
                            <!-- Daily notes will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="financial-chart-section">
                        <h3>Relat√≥rio Detalhado - <span id="financial-period-display"></span></h3>
                        <div class="financial-details">
                            <div id="financial-list">
                                <!-- Detalhes financeiros ser√£o renderizados aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-estoque" class="tab-content">
                <h2>Controle de Estoque</h2>
                <div class="stock-summary">
                    <div class="summary-card">
                        <h3>Itens em Estoque</h3>
                        <span class="count" id="total-items">0</span>
                    </div>
                    <div class="summary-card">
                        <h3>Itens Baixo Estoque</h3>
                        <span class="count" id="low-stock-items">0</span>
                    </div>
                </div>
                <div class="stock-controls">
                    <button id="btn-add-stock-item" class="btn-primary">
                        <i class="fa-solid fa-plus"></i> Adicionar Item
                    </button>
                    <div class="stock-month-controls">
                        <label for="stock-month-selector">Per√≠odo das Movimenta√ß√µes:</label>
                        <input type="month" id="stock-month-selector" class="month-selector">
                        <button id="btn-update-stock-movements" class="btn-primary">
                            <i class="fa-solid fa-refresh"></i> Filtrar
                        </button>
                        <button id="btn-clear-stock-filter" class="btn-secondary">
                            <i class="fa-solid fa-times"></i> Limpar Filtro
                        </button>
                    </div>
                </div>
                <div id="stock-list">
                    <!-- Lista de estoque ser√° renderizada aqui -->
                </div>
                <div class="stock-history">
                    <h3>Hist√≥rico de Movimenta√ß√µes</h3>
                    <div id="stock-movements">
                        <!-- Movimenta√ß√µes ser√£o renderizadas aqui -->
                    </div>
                </div>
            </div>

            <div id="tab-estagiarios" class="tab-content">
                <h2>Gerenciar Estagi√°rios</h2>
                <div class="search-container">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" id="search-intern" placeholder="Buscar estagi√°rio por nome...">
                </div>
                <!-- New: Button to add a new intern -->
                <div class="intern-controls" style="margin-bottom: 24px;">
                    <button id="btn-add-intern" class="btn-primary">
                        <i class="fa-solid fa-user-plus"></i> Adicionar Novo Estagi√°rio
                    </button>
                </div>
                <div id="intern-list-container">
                    <!-- Lista de estagi√°rios ser√° renderizada aqui -->
                    <p>Nenhum estagi√°rio cadastrado.</p>
                </div>
            </div>

            <div id="tab-documentos" class="tab-content">
                <h2>Gerenciar Documentos</h2>
                <div class="documents-header">
                    <div class="documents-controls">
                        <button id="btn-add-general-document" class="btn-primary">
                            <i class="fa-solid fa-plus"></i> Adicionar Documento
                        </button>
                        <button id="btn-add-general-note" class="btn-primary">
                            <i class="fa-solid fa-sticky-note"></i> Adicionar Nota
                        </button>
                    </div>
                    <div class="documents-filter">
                        <label for="documents-type-filter">Filtrar por tipo:</label>
                        <select id="documents-type-filter">
                            <option value="">Todos os tipos</option>
                            <option value="documento">üìÑ Documentos</option>
                            <option value="nota">üìù Notas</option>
                            <option value="relatorio">üìä Relat√≥rios</option>
                            <option value="comprovante">üí∞ Comprovantes</option>
                            <option value="outros">üì¶ Outros</option>
                        </select>
                    </div>
                </div>
                <div class="search-container">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" id="search-documents" placeholder="Buscar documentos por t√≠tulo ou descri√ß√£o...">
                </div>
                <div id="general-documents-list">
                    <!-- Lista de documentos ser√° renderizada aqui -->
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para Detalhes do Cliente -->
    <div id="modal-detalhes-cliente" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2 id="modal-nome-cliente"></h2>
            <div class="modal-details-grid">
                <div>
                    <h3>Dados Pessoais</h3>
                    <p><strong>CPF:</strong> <span id="modal-cpf-cliente"></span></p>
                    <p><strong>Data de Nasc.:</strong> <span id="modal-data-nascimento"></span></p>
                    <p><strong>Email:</strong> <span id="modal-email-cliente"></span></p>
                    <p><strong>Telefone:</strong> <span id="modal-telefone-cliente"></span></p>
                    <p><strong>Respons√°vel:</strong> <span id="modal-responsavel-cliente"></span></p>
                </div>
                 <div>
                    <h3>Endere√ßo</h3>
                    <p><strong id="modal-logradouro-cliente"></strong>, <span id="modal-numero-cliente"></span></p>
                    <p><span id="modal-bairro-cliente"></span></p>
                    <p><span id="modal-cidade-estado-cliente"></span></p>
                    <p><strong>CEP:</strong> <span id="modal-cep-cliente"></span></p>
                </div>
            </div>
            <div class="modal-obs">
                <h3>Observa√ß√µes</h3>
                <p id="modal-observacoes-cliente"></p>
            </div>

            <div class="client-notes-section">
                <h3>Notas do Cliente</h3>
                <div id="client-notes-list">
                    <!-- Notas ser√£o preenchidas aqui -->
                </div>
                <button id="btn-add-note" class="btn-primary">Adicionar Nota</button>
            </div>

            <div class="client-documents-section">
                <h3>Documentos Anexados</h3>
                <div id="client-documents-list">
                    <!-- Documentos ser√£o preenchidos aqui -->
                </div>
                <button id="btn-add-document" class="btn-primary">Anexar Documento</button>
            </div>

            <hr>
            <h3>Hist√≥rico de Atendimentos</h3>
            <div id="historico-atendimentos">
                <!-- Hist√≥rico ser√° preenchido aqui -->
            </div>
            <button id="btn-novo-atendimento" class="btn-primary">Adicionar Novo Atendimento</button>
            <button id="btn-edit-client" class="btn-primary" style="margin-left: 10px;">Editar Dados Pessoais</button>
            <button id="btn-schedule-new-appointment" class="btn-primary" style="margin-left: 10px;">Agendar Novo Atendimento</button>
        </div>
    </div>

    <!-- Modal para Editar Cliente -->
    <div id="modal-editar-cliente" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Editar Dados Pessoais</h2>
            <form id="form-editar-cliente">
                <div id="edit-form-container">
                    <!-- Form fields will be populated dynamically -->
                </div>
                <button type="submit" class="btn-primary">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <!-- Modal para Adicionar Nota -->
    <div id="modal-add-note" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Adicionar Nota</h2>
            <form id="form-add-note">
                <div class="form-group">
                    <label for="note-title">T√≠tulo da Nota</label>
                    <input type="text" id="note-title" required>
                </div>
                <div class="form-group">
                    <label for="note-content">Conte√∫do da Nota</label>
                    <textarea id="note-content" rows="4" required></textarea>
                </div>
                <button type="submit" class="btn-primary">Salvar Nota</button>
            </form>
        </div>
    </div>

    <!-- Modal para Novo Atendimento -->
    <div id="modal-novo-atendimento" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Novo Atendimento</h2>
            <form id="form-novo-atendimento">
                <div class="form-group">
                    <label for="data-atendimento">Data</label>
                    <input type="date" id="data-atendimento" required>
                </div>
                <div class="form-group">
                    <label for="select-anamnese">Tipo de Anamnese</label>
                    <select id="select-anamnese" required>
                        <!-- Op√ß√µes de anamnese ser√£o preenchidas aqui -->
                    </select>
                </div>
                 <div class="form-group">
                    <label for="notas-atendimento">Anota√ß√µes</label>
                    <textarea id="notas-atendimento" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label for="valor-atendimento">Valor do Atendimento (R$)</label>
                    <input type="number" id="valor-atendimento" step="0.01" min="0">
                </div>
                <button type="submit" class="btn-primary">Salvar Atendimento</button>
            </form>
        </div>
    </div>

    <!-- Modal para Editar Agendamento -->
    <div id="modal-editar-agendamento" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Editar Agendamento</h2>
            <form id="form-editar-agendamento">
                <div class="form-group">
                    <label for="edit-cliente-agenda">Cliente</label>
                    <select id="edit-cliente-agenda" required>
                        <option value="">Selecione um cliente</option>
                        <!-- Clientes ser√£o preenchidos aqui -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-data-agendamento">Data</label>
                    <input type="date" id="edit-data-agendamento" required>
                </div>
                <div class="form-group">
                    <label for="edit-hora-agendamento">Hor√°rio</label>
                    <input type="time" id="edit-hora-agendamento" required>
                </div>
                <div class="form-group">
                    <label for="edit-tipo-servico">Tipo de Servi√ßo</label>
                    <select id="edit-tipo-servico" required>
                        <!-- Tipos de servi√ßo ser√£o preenchidos aqui -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-observacoes-agendamento">Observa√ß√µes</label>
                    <textarea id="edit-observacoes-agendamento" rows="3"></textarea>
                </div>
                <button type="submit" class="btn-primary">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <!-- Modal para Adicionar Documento -->
    <div id="modal-add-document" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Anexar Documento</h2>
            <form id="form-add-document">
                <div class="form-group">
                    <label for="document-title">T√≠tulo do Documento</label>
                    <input type="text" id="document-title" required placeholder="Ex: Comprovante de Pagamento - Janeiro/2024">
                </div>
                <div class="form-group">
                    <label for="document-type">Tipo de Documento</label>
                    <select id="document-type" required>
                        <option value="">Selecione o tipo</option>
                        <option value="pagamento">üí∞ Comprovante de Pagamento</option>
                        <option value="laudo">üìù Laudo M√©dico</option>
                        <option value="receita">üìÑ Receita M√©dica</option>
                        <option value="exame">üìä Resultado de Exame</option>
                        <option value="relatorio">üìã Relat√≥rio de Atendimento</option>
                        <option value="outros">üì¶ Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="document-file">Arquivo</label>
                    <input type="file" id="document-file" required accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                    <small>Formatos aceitos: PDF, JPG, PNG, DOC, DOCX (m√°x. 5MB)</small>
                </div>
                <div class="form-group">
                    <label for="document-description">Descri√ß√£o (opcional)</label>
                    <textarea id="document-description" rows="3" placeholder="Observa√ß√µes sobre o documento..."></textarea>
                </div>
                <button type="submit" class="btn-primary">Salvar Documento</button>
            </form>
        </div>
    </div>

    <!-- Modal para Novo Agendamento -->
    <div id="modal-novo-agendamento" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Novo Agendamento</h2>
            <form id="form-novo-agendamento">
                <div class="form-group">
                    <label for="select-cliente-agenda">Cliente</label>
                    <select id="select-cliente-agenda" required>
                        <option value="">Selecione um cliente</option>
                        <!-- Clientes ser√£o preenchidos aqui -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="data-agendamento">Data</label>
                    <input type="date" id="data-agendamento" required>
                </div>
                <div class="form-group">
                    <label for="hora-agendamento">Hor√°rio</label>
                    <input type="time" id="hora-agendamento" required>
                </div>
                <div class="form-group">
                    <label for="tipo-servico">Tipo de Servi√ßo</label>
                    <select id="tipo-servico" required>
                        <!-- Tipos de servi√ßo ser√£o preenchidos aqui -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="select-assigned-professional">Profissional Respons√°vel</label>
                    <select id="select-assigned-professional">
                        <option value="">Nenhum (selecione)</option>
                        <!-- Usu√°rios (funcion√°rios e estagi√°rios) ser√£o preenchidos aqui -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="observacoes-agendamento">Observa√ß√µes</label>
                    <textarea id="observacoes-agendamento" rows="3"></textarea>
                </div>
                <button type="submit" class="btn-primary">Agendar</button>
            </form>
        </div>
    </div>

    <!-- Modal para Cancelar Agendamento -->
    <div id="modal-cancelar-agendamento" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Cancelar Agendamento</h2>
            <form id="form-cancelar-agendamento">
                <div class="form-group">
                    <label for="motivo-cancelamento">Motivo do Cancelamento</label>
                    <textarea id="motivo-cancelamento" rows="4" required placeholder="Digite o motivo do cancelamento..."></textarea>
                </div>
                <div class="form-group">
                    <label for="imagem-cancelamento">Comprovante (opcional)</label>
                    <input type="file" id="imagem-cancelamento" accept="image/*">
                    <small>Anexe uma imagem caso tenha comprovante da conversa (WhatsApp, SMS, etc.)</small>
                </div>
                <div id="preview-imagem-cancelamento" style="display: none; margin-top: 10px;">
                    <img id="img-preview-cancelamento" style="max-width: 100%; max-height: 200px; border-radius: 8px; border: 1px solid var(--border-color);">
                </div>
                <button type="submit" class="btn-primary">Confirmar Cancelamento</button>
            </form>
        </div>
    </div>

    <!-- Modal para Confirmar Atendimento -->
    <div id="modal-confirmar-atendimento" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Confirmar Atendimento</h2>
            <p id="confirm-attendance-client-info" class="modal-client-info"></p>
            <form id="form-confirmar-atendimento">
                <div class="form-group">
                    <label for="profissional-responsavel">Profissional Respons√°vel</label>
                    <input type="text" id="profissional-responsavel" required>
                </div>
                
                <div class="form-group">
                    <label for="observacoes-confirmacao">Observa√ß√µes do Atendimento</label>
                    <textarea id="observacoes-confirmacao" rows="3" placeholder="Descreva como foi o atendimento..."></textarea>
                </div>

                <div class="form-group">
                    <label for="valor-atendimento-confirmacao">Valor do Atendimento (R$)</label>
                    <input type="number" id="valor-atendimento-confirmacao" step="0.01" min="0">
                </div>

                <fieldset>
                    <legend>Materiais Utilizados</legend>
                    <div id="materials-selection">
                        <!-- Materiais ser√£o carregados aqui -->
                    </div>
                    <button type="button" id="btn-add-material" class="btn-secondary">
                        <i class="fa-solid fa-plus"></i> Adicionar Material
                    </button>
                </fieldset>

                <div class="form-group">
                    <label for="anexos-confirmacao">Anexar Documentos (opcional)</label>
                    <input type="file" id="anexos-confirmacao" multiple accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                    <small>Formatos aceitos: PDF, JPG, PNG, DOC, DOCX</small>
                </div>

                <button type="submit" class="btn-primary">Confirmar Atendimento</button>
            </form>
        </div>
    </div>

    <!-- Modal para Adicionar Item ao Estoque -->
    <div id="modal-add-stock" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Adicionar Item ao Estoque</h2>
            <form id="form-add-stock">
                <div class="form-group">
                    <label for="stock-item-name">Nome do Item</label>
                    <input type="text" id="stock-item-name" required placeholder="Ex: L√°pis HB">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="stock-item-category">Categoria</label>
                        <select id="stock-item-category" required>
                            <option value="">Selecione</option>
                            <option value="papelaria">Papelaria</option>
                            <option value="testes">Testes Neuropsicol√≥gicos</option>
                            <option value="brinquedos">Brinquedos Terap√™uticos</option>
                            <option value="jogos">Jogos e Quebra-cabe√ßas</option>
                            <option value="tecnologia">Equipamentos Tecnol√≥gicos</option>
                            <option value="consumiveis">Materiais Consum√≠veis</option>
                            <option value="outros">Outros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="stock-item-quantity">Quantidade</label>
                        <input type="number" id="stock-item-quantity" required min="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="stock-item-min-stock">Estoque M√≠nimo</label>
                        <input type="number" id="stock-item-min-stock" required min="0" value="5">
                    </div>
                    <div class="form-group">
                        <label for="stock-item-unit">Unidade</label>
                        <select id="stock-item-unit" required>
                            <option value="unidade">Unidade</option>
                            <option value="pacote">Pacote (5 unidades)</option>
                            <option value="caixa">Caixa (10 unidades)</option>
                            <option value="resma">Resma (15 unidades)</option>
                            <option value="kit">Kit (20 unidades)</option>
                            <option value="lote">Lote (25 unidades)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="stock-item-unit-value">Valor por Unidade (R$)</label>
                    <input type="number" id="stock-item-unit-value" step="0.01" min="0" value="0.00">
                </div>
                <div class="form-group">
                    <label for="stock-item-description">Descri√ß√£o (opcional)</label>
                    <textarea id="stock-item-description" rows="3" placeholder="Descri√ß√£o detalhada do item..."></textarea>
                </div>
                <button type="submit" class="btn-primary">Adicionar ao Estoque</button>
            </form>
        </div>
    </div>

    <!-- Modal para Ajustar Estoque -->
    <div id="modal-adjust-stock" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2 id="adjust-stock-title">Ajustar Estoque</h2>
            <form id="form-adjust-stock">
                <div class="form-group">
                    <label for="adjust-stock-quantity" id="adjust-stock-quantity-label">Quantidade</label>
                    <input type="number" id="adjust-stock-quantity" min="1" required>
                    <small id="adjust-stock-unit-info"></small>
                </div>
                <div class="form-group">
                    <label for="adjust-stock-reason">Motivo da movimenta√ß√£o</label>
                    <input type="text" id="adjust-stock-reason" required placeholder="Digite o motivo...">
                </div>
                <button type="submit" class="btn-primary" id="adjust-stock-submit-btn">Confirmar</button>
            </form>
        </div>
    </div>

    <!-- Modal para Confirma√ß√£o de Exclus√£o -->
    <div id="modal-confirm-delete" class="modal-overlay" style="display: none;">
        <div class="modal-content modal-small">
            <button class="modal-close-btn">&times;</button>
            <h2>Confirmar Exclus√£o</h2>
            <p id="delete-confirmation-message"></p>
            <div class="modal-actions">
                <button id="btn-confirm-delete" class="btn-danger">Excluir</button>
                <button id="btn-cancel-delete" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Novo Modal para Redirecionar Agendamento -->
    <div id="modal-reassign-schedule" class="modal-overlay" style="display: none;">
        <div class="modal-content modal-small">
            <button class="modal-close-btn">&times;</button>
            <h2>Redirecionar Agendamento</h2>
            <p id="reassign-schedule-info" class="modal-client-info"></p>
            <form id="form-reassign-schedule">
                <div class="form-group">
                    <label for="select-assigned-user">Atribuir a Profissional</label>
                    <select id="select-assigned-user" required>
                        <option value="">Selecione um profissional</option>
                        <!-- Usu√°rios (funcion√°rios e estagi√°rios) ser√£o preenchidos aqui -->
                    </select>
                </div>
                <button type="submit" class="btn-primary">Confirmar Redirecionamento</button>
            </form>
        </div>
    </div>

    <!-- Novo Modal para Detalhes do Estagi√°rio -->
    <div id="modal-detalhes-estagiario" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2 id="modal-nome-estagiario"></h2>
            <div class="modal-details-grid">
                <div>
                    <h3>Dados Pessoais</h3>
                    <p><strong>Nome Completo:</strong> <span id="intern-modal-nome-completo"></span></p>
                    <p><strong>CPF:</strong> <span id="intern-modal-cpf"></span></p>
                    <p><strong>Celular:</strong> <span id="intern-modal-celular"></span></p>
                    <p><strong>Email:</strong> <span id="intern-modal-email"></span></p>
                    <p><strong>Endere√ßo:</strong> <span id="intern-modal-endereco"></span></p>
                </div>
                <div>
                    <h3>Forma√ß√£o e Acad√™mico</h3>
                    <p><strong>Institui√ß√£o de Ensino:</strong> <span id="intern-modal-instituicao"></span></p>
                    <p><strong>Per√≠odo da Gradua√ß√£o:</strong> <span id="intern-modal-periodo"></span></p>
                    <p><strong>Forma√ß√£o:</strong> <span id="intern-modal-formacao"></span></p>
                    <p><strong>Disciplina:</strong> <span id="intern-modal-disciplina"></span></p>
                </div>
            </div>
            <hr>
            <h3>Pacientes Atendidos</h3>
            <div id="intern-patients-list">
                <!-- Lista de pacientes atendidos pelo estagi√°rio ser√° preenchida aqui -->
            </div>
            <div class="change-history-section" style="margin-top: 20px;">
                <h3>Hist√≥rico de Altera√ß√µes</h3>
                <div id="intern-change-history-list">
                    <!-- Hist√≥rico de altera√ß√µes do estagi√°rio ser√° preenchido aqui -->
                </div>
            </div>
            <button id="btn-edit-intern" class="btn-primary" style="margin-top: 20px;">Editar Dados Cadastrais</button>
            <!-- NEW: Delete Intern Button -->
            <button id="btn-delete-intern" class="btn-danger" style="margin-top: 20px; margin-left: 10px;">Excluir Estagi√°rio</button>
        </div>
    </div>

    <!-- Novo Modal para Editar Estagi√°rio -->
    <div id="modal-editar-estagiario" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Editar Dados do Estagi√°rio</h2>
            <form id="form-editar-estagiario">
                <div class="edit-form-section">
                    <h4>Dados Pessoais</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-intern-name">Nome Completo</label>
                            <input type="text" id="edit-intern-name" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-intern-cpf">CPF</label>
                            <input type="text" id="edit-intern-cpf" placeholder="000.000.000-00">
                        </div>
                        <div class="form-group">
                            <label for="edit-intern-phone">Celular</label>
                            <input type="tel" id="edit-intern-phone" placeholder="(00) 90000-0000">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="edit-intern-email">Email</label>
                        <input type="email" id="edit-intern-email">
                    </div>
                    <div class="form-group">
                        <label for="edit-intern-address">Endere√ßo</label>
                        <input type="text" id="edit-intern-address" placeholder="Rua, N√∫mero, Bairro, Cidade/Estado">
                    </div>
                </div>
                
                <div class="edit-form-section">
                    <h4>Forma√ß√£o e Acad√™mico</h4>
                    <div class="form-group">
                        <label for="edit-intern-institution">Institui√ß√£o de Ensino</label>
                        <input type="text" id="edit-intern-institution">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-intern-graduation-period">Per√≠odo da Gradua√ß√£o</label>
                            <input type="text" id="edit-intern-graduation-period" placeholder="Ex: 5¬∫ Semestre">
                        </div>
                        <div class="form-group">
                            <label for="edit-intern-education">Forma√ß√£o</label>
                            <input type="text" id="edit-intern-education" placeholder="Ex: Psicologia">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="edit-intern-discipline">Disciplina (ou √Årea de Atua√ß√£o)</label>
                        <input type="text" id="edit-intern-discipline" placeholder="Ex: Neuropsicologia Infantil">
                    </div>
                </div>

                <button type="submit" class="btn-primary">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <!-- Novo Modal para Adicionar Estagi√°rio -->
    <div id="modal-add-intern" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Adicionar Novo Estagi√°rio</h2>
            <form id="form-add-intern">
                <fieldset>
                    <legend>Dados de Acesso</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="new-intern-username">Usu√°rio</label>
                            <input type="text" id="new-intern-username" required>
                        </div>
                        <div class="form-group">
                            <label for="new-intern-password">Senha</label>
                            <input type="password" id="new-intern-password" required>
                        </div>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Dados Pessoais</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="new-intern-name">Nome Completo</label>
                            <input type="text" id="new-intern-name" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="new-intern-cpf">CPF</label>
                            <input type="text" id="new-intern-cpf" placeholder="000.000.000-00">
                        </div>
                        <div class="form-group">
                            <label for="new-intern-phone">Celular</label>
                            <input type="tel" id="new-intern-phone" placeholder="(00) 90000-0000">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="new-intern-email">Email</label>
                            <input type="email" id="new-intern-email">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="new-intern-address">Endere√ßo</label>
                        <input type="text" id="new-intern-address" placeholder="Rua, N√∫mero, Bairro, Cidade/Estado">
                    </div>
                </fieldset>
                
                <fieldset>
                    <legend>Forma√ß√£o e Acad√™mico</legend>
                    <div class="form-group">
                        <label for="new-intern-institution">Institui√ß√£o de Ensino</label>
                        <input type="text" id="new-intern-institution">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="new-intern-graduation-period">Per√≠odo da Gradua√ß√£o</label>
                            <input type="text" id="new-intern-graduation-period" placeholder="Ex: 5¬∫ Semestre">
                        </div>
                        <div class="form-group">
                            <label for="new-intern-education">Forma√ß√£o</label>
                            <input type="text" id="new-intern-education" placeholder="Ex: Psicologia">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="new-intern-discipline">Disciplina (ou √Årea de Atua√ß√£o)</label>
                        <input type="text" id="new-intern-discipline" placeholder="Ex: Neuropsicologia Infantil">
                    </div>
                </fieldset>

                <button type="submit" class="btn-primary">Cadastrar Estagi√°rio</button>
            </form>
        </div>
    </div>

    <!-- Modal para Adicionar Nota Di√°ria -->
    <div id="modal-add-daily-note" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Adicionar Nota Di√°ria</h2>
            <form id="form-add-daily-note">
                <div class="form-group">
                    <label for="daily-note-date">Data</label>
                    <input type="date" id="daily-note-date" required>
                </div>
                <div class="form-group">
                    <label for="daily-note-title">T√≠tulo</label>
                    <input type="text" id="daily-note-title" required placeholder="Ex: Compra de materiais, Pagamento estagi√°rio">
                </div>
                <div class="form-group">
                    <label for="daily-note-type">Tipo</label>
                    <select id="daily-note-type" required>
                        <option value="">Selecione o tipo</option>
                        <option value="receita">üí∞ Receita</option>
                        <option value="despesa">üí∏ Despesa</option>
                        <option value="observacao">üìù Observa√ß√£o</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="daily-note-value">Valor (R$) - opcional</label>
                    <input type="number" id="daily-note-value" step="0.01" min="0" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label for="daily-note-content">Descri√ß√£o</label>
                    <textarea id="daily-note-content" rows="4" required placeholder="Descreva os detalhes da movimenta√ß√£o financeira..."></textarea>
                </div>
                <div class="form-group">
                    <label for="daily-note-file">Anexar Arquivo (opcional)</label>
                    <input type="file" id="daily-note-file" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                    <small>Formatos aceitos: PDF, JPG, PNG, DOC, DOCX (m√°x. 5MB)</small>
                </div>
                <button type="submit" class="btn-primary">Salvar Nota</button>
            </form>
        </div>
    </div>

    <!-- Modal para Relat√≥rio Mensal -->
    <div id="modal-monthly-report" class="modal-overlay" style="display: none;">
        <div class="modal-content modal-large">
            <button class="modal-close-btn">&times;</button>
            <div class="monthly-report-header">
                <h2>Relat√≥rio Financeiro Mensal</h2>
                <div class="report-controls">
                    <label for="report-month-selector">M√™s:</label>
                    <input type="month" id="report-month-selector" class="month-selector">
                    <button id="btn-update-monthly-report" class="btn-primary">
                        <i class="fa-solid fa-refresh"></i> Atualizar
                    </button>
                    <button id="btn-print-report" class="btn-secondary">
                        <i class="fa-solid fa-print"></i> Imprimir
                    </button>
                </div>
            </div>
            <div id="monthly-report-content">
                <!-- Monthly report content will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar Documento Geral -->
    <div id="modal-add-general-document" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Adicionar Documento Geral</h2>
            <form id="form-add-general-document">
                <div class="form-group">
                    <label for="general-document-title">T√≠tulo do Documento</label>
                    <input type="text" id="general-document-title" required placeholder="Ex: Contrato de Est√°gio - Jo√£o Silva">
                </div>
                <div class="form-group">
                    <label for="general-document-type">Tipo de Documento</label>
                    <select id="general-document-type" required>
                        <option value="">Selecione o tipo</option>
                        <option value="documento">üìÑ Documento</option>
                        <option value="relatorio">üìä Relat√≥rio</option>
                        <option value="comprovante">üí∞ Comprovante</option>
                        <option value="contrato">üìã Contrato</option>
                        <option value="outros">üì¶ Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="general-document-file">Arquivo</label>
                    <input type="file" id="general-document-file" required accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                    <small>Formatos aceitos: PDF, JPG, PNG, DOC, DOCX (m√°x. 5MB)</small>
                </div>
                <div class="form-group">
                    <label for="general-document-description">Descri√ß√£o (opcional)</label>
                    <textarea id="general-document-description" rows="3" placeholder="Observa√ß√µes sobre o documento..."></textarea>
                </div>
                <button type="submit" class="btn-primary">Salvar Documento</button>
            </form>
        </div>
    </div>

    <!-- Modal para Adicionar Nota Geral -->
    <div id="modal-add-general-note" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h2>Adicionar Nota Geral</h2>
            <form id="form-add-general-note">
                <div class="form-group">
                    <label for="general-note-title">T√≠tulo da Nota</label>
                    <input type="text" id="general-note-title" required placeholder="Ex: Reuni√£o de equipe - 26/06/2025">
                </div>
                <div class="form-group">
                    <label for="general-note-type">Tipo de Nota</label>
                    <select id="general-note-type" required>
                        <option value="">Selecione o tipo</option>
                        <option value="nota">üìù Nota</option>
                        <option value="lembrete">üîî Lembrete</option>
                        <option value="procedimento">üìã Procedimento</option>
                        <option value="observacao">üëÅÔ∏è Observa√ß√£o</option>
                        <option value="outros">üì¶ Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="general-note-content">Conte√∫do da Nota</label>
                    <textarea id="general-note-content" rows="6" required placeholder="Escreva o conte√∫do da nota..."></textarea>
                </div>
                <button type="submit" class="btn-primary">Salvar Nota</button>
            </form>
        </div>
    </div>


    
    
    
    
    
    
    
    
    
    <!-- Configura√ß√£o autom√°tica via build -->
    <script>
        window.ENV = {
            SUPABASE_URL: 'https://ncjtfggvxvvasntozcqw.supabase.co',
            SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5janRmZ2d2eHZ2YXNudG96Y3F3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0OTE3NDEsImV4cCI6MjA2NzA2Nzc0MX0.brzv2WhajL5o4ML16sYkCof_rgUfWN0RXQUQ72Yjil8',
            BUILD_TIME: '2025-07-02T23:32:55.782Z',
            ENVIRONMENT: 'production',
            IS_VERCEL: true
        };
        console.log('üîß Configura√ß√£o de produ√ß√£o carregada:', {
            url: window.ENV.SUPABASE_URL,
            key: window.ENV.SUPABASE_ANON_KEY ? window.ENV.SUPABASE_ANON_KEY.substring(0, 20) + '...' : 'N√£o configurada',
            buildTime: window.ENV.BUILD_TIME,
            environment: window.ENV.ENVIRONMENT
        });
    </script>
    <!-- Supabase SDK via CDN (com fallback para Vercel) -->
    <script type="module">
        try {
            // Tentar importar Supabase
            const { createClient } = await import('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm');
            
            // Configura√ß√£o Supabase (obtida das vari√°veis de ambiente injetadas pelo build.js)
            const supabaseUrl = window.ENV?.SUPABASE_URL || 'https://your-project.supabase.co';
            const supabaseAnonKey = window.ENV?.SUPABASE_ANON_KEY || 'your-anon-key';
            
            console.log('üîç Verificando configura√ß√£o Supabase...');
            console.log('- URL:', supabaseUrl);
            console.log('- Key:', supabaseAnonKey ? supabaseAnonKey.substring(0, 20) + '...' : 'N√£o configurada');
            console.log('- Environment:', window.ENV?.ENVIRONMENT || 'local');
            
            // Verificar se temos credenciais v√°lidas (URLs que n√£o sejam placeholders)
            const hasValidCredentials = supabaseUrl.includes('supabase.co') && 
                                       !supabaseUrl.includes('your-project') && 
                                       supabaseAnonKey !== 'your-anon-key' &&
                                       supabaseAnonKey.length > 50;
            
            // Inicializar Supabase se tiver credenciais v√°lidas
            if (hasValidCredentials) {
                console.log('üü¢ Credenciais v√°lidas encontradas, inicializando Supabase...');
                
                const supabase = createClient(supabaseUrl, supabaseAnonKey);
                
                // Disponibilizar globalmente
                window.supabase = supabase;
                window.supabaseUrl = supabaseUrl;
                window.supabaseKey = supabaseAnonKey;
                window.SUPABASE_READY = true;
                window.USE_SUPABASE = true;
                
                console.log('üü¢ Supabase inicializado - URL:', supabaseUrl);
                console.log('üîë Key configurada:', supabaseAnonKey.substring(0, 20) + '...');
                
                // Verificar conectividade e autentica√ß√£o
                try {
                    const { data: session, error } = await supabase.auth.getSession();
                    if (error) {
                        console.warn('‚ö†Ô∏è Erro na sess√£o Supabase:', error.message);
                        console.log('‚ÑπÔ∏è Isto √© normal se ainda n√£o estiver logado');
                    }
                    
                    // Testar conex√£o com o banco
                    const { data: test, error: testError } = await supabase
                        .from('clients')
                        .select('count')
                        .limit(1);
                    
                    if (testError) {
                        console.warn('‚ö†Ô∏è Erro ao conectar com o banco:', testError.message);
                        console.log('üîÑ Fallback para modo local ativado');
                        window.SUPABASE_READY = false;
                        window.USE_SUPABASE = false;
                    } else {
                        console.log('‚úÖ Supabase conectado e banco acess√≠vel!');
                        console.log('üìä Modo de dados compartilhados ativo');
                    }
                } catch (err) {
                    console.warn('‚ö†Ô∏è Erro de conectividade Supabase:', err);
                    console.log('üîÑ Fallback para modo local ativado');
                    window.SUPABASE_READY = false;
                    window.USE_SUPABASE = false;
                }
            } else {
                // Configura√ß√£o padr√£o (modo local)
                console.log('üü° Supabase n√£o configurado ou credenciais inv√°lidas');
                console.log('üìã Sistema funcionando em modo local (localStorage)');
                window.SUPABASE_READY = false;
                window.USE_SUPABASE = false;
                window.supabase = null;
            }
        } catch (error) {
            // Fallback se CDN falhar
            console.warn('‚ö†Ô∏è Erro ao carregar Supabase SDK:', error);
            console.log('üîÑ Funcionando apenas em modo local');
            
            window.SUPABASE_READY = false;
            window.USE_SUPABASE = false;
            window.supabase = null;
        }
        
        // Configura√ß√µes globais do sistema
        window.SYSTEM_CONFIG = {
            supabaseReady: window.SUPABASE_READY || false,
            environment: window.location.hostname === 'localhost' ? 'development' : 'production',
            fallbackMode: !window.SUPABASE_READY,
            hasSupabaseConfig: window.ENV?.SUPABASE_URL ? true : false
        };
        
        console.log('üîß Configura√ß√£o final do sistema:', window.SYSTEM_CONFIG);
        
        // Notificar status na interface
        setTimeout(() => {
            const statusMsg = window.SUPABASE_READY 
                ? 'üü¢ Sistema conectado - dados compartilhados' 
                : 'üü° Sistema local - dados no navegador';
            console.log(statusMsg);
        }, 1000);
    </script>

    <script type="importmap">
    {
        "imports": {
            "@supabase/supabase-js": "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm",
            "./js/": "./js/"
        }
    }
    </script>
    <script type="module" src="js/main.js"></script>
</body>
</html>